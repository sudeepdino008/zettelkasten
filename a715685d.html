<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>Crypto: Consensus mechanisms - My Zettelkasten</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Merriweather|Libre+Franklin|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><link href="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" rel="icon" /><meta content="Sudeep" name="author" /><meta content="ways to establish consensus about history. This boils down to which transactions or blocks are valid." name="description" /><link href="https://sudeepdino008.github.io/a715685d.html" rel="canonical" /><meta content="Crypto: Consensus mechanisms" property="og:title" /><meta content="My Zettelkasten" property="og:site_name" /><meta content="article" property="og:type" /><script type="application/ld+json">[{"@context":"https://schema.org","itemListElement":[{"name":"Money","item":"https://sudeepdino008.github.io/08ed3ff1.html","@type":"ListItem","position":1},{"name":"Cryptocurrency","item":"https://sudeepdino008.github.io/f6d6d725.html","@type":"ListItem","position":2},{"name":"Cryptocurrency: Key Features","item":"https://sudeepdino008.github.io/0376df38.html","@type":"ListItem","position":3}],"@type":"BreadcrumbList"},{"@context":"https://schema.org","itemListElement":[{"name":"Engineering","item":"https://sudeepdino008.github.io/9cfae20f.html","@type":"ListItem","position":1},{"name":"Cryptocurrency","item":"https://sudeepdino008.github.io/f6d6d725.html","@type":"ListItem","position":2},{"name":"Cryptocurrency: Key Features","item":"https://sudeepdino008.github.io/0376df38.html","@type":"ListItem","position":3}],"@type":"BreadcrumbList"},{"@context":"https://schema.org","itemListElement":[{"name":"Blockchain","item":"https://sudeepdino008.github.io/519f559e.html","@type":"ListItem","position":1}],"@type":"BreadcrumbList"}]</script><style type="text/css">body{background-color:#eeeeee !important;font-family:"Libre Franklin", serif !important}body .ui.container{font-family:"Libre Franklin", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Merriweather", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .zettel-content h1#title-h1{background-color:rgba(165,103,63,0.1)}body nav.bottomPane{background-color:rgba(165,103,63,2.0e-2)}body div#footnotes{border-top-color:#a5673f}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content div#footnotes ol > li > p:only-of-type{display:inline;margin-right:0.5em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f5f2f0}body div.zettel-view .zettel-content pre{overflow:auto}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}body span.zettel-link-container span.zettel-link a{color:#a5673f;font-weight:bold;text-decoration:none}body span.zettel-link-container span.zettel-link a:hover{background-color:rgba(165,103,63,0.1)}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}</style><!-- Font  -->
<!-- TODO: neuron has changed default font, remove it later  -->
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&#38;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,600&#38;display=swap" rel="stylesheet">

<!-- mermaidjs -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
window.addEventListener("load", mermaid.initialize({startOnLoad:true}))
</script>

<!-- graphviz -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js" integrity="sha512-vnRdmX8ZxbU+IhA2gLhZqXkX1neJISG10xy0iP0WauuClu3AIMknxyDjYHEpEhi8fTZPyOCWgqUCnEafDB/jVQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js" integrity="sha512-1zKK2bG3QY2JaUPpfHZDUMe3dwBwFdCDwXQ01GrKSd+/l0hqPbF+aak66zYPUZtn+o2JYi1mjXAqy5mW04v3iA==" crossorigin="anonymous"></script>
<script>
window.addEventListener("load", function(){
  let viz = new Viz();
  for (let element of document.getElementsByClassName("graphviz")) {
    let parent = element.parentNode
    let pparent = parent.parentNode
    viz.renderSVGElement(element.textContent)
    .then(function(element) {
      element.setAttribute("width", "100%")
      pparent.replaceChild(element, parent)
    });
  }
});
</script>

<!-- chartjs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js" integrity="sha512-SuxO9djzjML6b9w9/I07IWnLnQhgyYVSpHZx0JV97kGBfTIsUYlWflyuW4ypnvhBrslz1yJ3R+S14fdCWmSmSA==" crossorigin="anonymous"></script>
<script>
window.addEventListener("load", function(){
  for (let element of document.getElementsByClassName("chartjs")) {
    let parent = element.parentNode
    let pparent = parent.parentNode
    let canvas = document.createElement('canvas');
    let box = document.createElement('div');
    box.appendChild(canvas);
    let ctx = canvas.getContext("2d")
    let myChart = new Chart(ctx, JSON.parse(element.textContent));
    box.setAttribute("style","display:block;width:75%;text-align:'center';margin: 5px auto;");
    pparent.replaceChild(box, parent)
  }
});
</script>

<!-- Custom css  -->
<style>

  
img[src$="centerme"] {
  display:block;
  margin: 0 auto;
}

ui.menu {
  font-size: 0.6em;
}

/* tree icon disappear some times*/
body .tree {
  overflow: hidden;
}

/* width */
.ui.text.container {
    min-width: 1000px;
}

@media screen and (min-width: 700px) {
    .ui.attached.segment {
      padding: 50px;
    }
}

* {
  font-size: 17px;
}

body div.zettel-view .zettel-content h1 {
  font-family: "Crimson Text", serif !important;
  font-weight: 600 !important;
  padding: 0.3rem !important;
  border-bottom: none;
  text-align: left;
  background-color: inherit !important;
}

body div.zettel-view .zettel-content h2 {
  font-family: "Crimson Text", serif !important;
  font-weight: 600 !important;
  padding: 0.3rem !important;
  font-size: 1.75rem !important;
  border-bottom: none;
  text-align: left;
  background-color: inherit !important;
}


body div.zettel-view .zettel-content h3 {
  font-family: "Crimson Text", serif !important;
  font-weight: 600 !important;
  padding: 0.3rem !important;
  font-size: 1.5rem !important;
  border-bottom: none;
  text-align: left;
  background-color: inherit !important;
}

body div.zettel-view .zettel-content h4 {
  font-family: "Crimson Text", serif !important;
  font-weight: 600 !important;
  font-size: 1.25rem !important;
  padding: 0.3rem !important;
  border-bottom: none;
  text-align: left;
  background-color: inherit !important;
}

/* title */
#zettel-container > div.zettel-view > article > h1:first-child {
/* body div#neuron-theme-default-black .zettel-content h1 { */
  /* text-align: center !important; */
  font-family: "Crimson Text", serif !important;
  /* font-style: italic; */
  text-align: right;
  font-weight: normal !important;
  font-size: 2rem;
  padding: 1rem;
  /* padding-top: 1rem; */
  /* padding-right: 1rem; */
  /* padding-left: 1rem; */
  background-color: inherit !important;
}

#neuron-theme-default-black > div > h1 {
  font-family: "Crimson Text", serif !important;
  font-weight: normal;
}

/* divider */
.ui.horizontal.divider:before {
  width: 100%;
}

/* logo */
div.ui.one.column.grid.footer-version > div > div > a > img {
  display:none !important;
}

div.ui.one.column.grid.footer-version > div > div > a:before {
  content: "© 2020 shifuda" !important;
  font-size: 0.8rem;
}

/* link */
body div#neuron-theme-default-black span.zettel-link-container span.zettel-link a {
  color: inherit !important;
}

time {
  font-family: "Crimson Text", monospace !important;
}

body code, pre, tt {
  font-family: "Source Code Pro", monospace !important;
}

.ui.text.container {
  font-family: "Crimson Text", serif !important;
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

</style>
<!--replace-end-7--><!--replace-end-4--><!--replace-end-1--></head><body><div class="ui fluid container universe"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><nav class="flipped tree deemphasized" id="zettel-uptree" style="transform-origin: 50%"><ul class="root"><li><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2021-05-09T14:11"><a href="519f559e.html">Blockchain</a></span></span></div></li><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2021-05-07T09:06"><a href="0376df38.html">Cryptocurrency: Key Features</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2021-04-11T10:27"><a href="f6d6d725.html">Cryptocurrency</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2021-01-20T12:36"><a href="08ed3ff1.html">Money</a></span></span></div></li><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2020-09-24T23:17"><a href="9cfae20f.html">Engineering</a></span></span></div></li></ul></li></ul></li></ul></li></ul></nav><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="title-h1">Crypto: Consensus mechanisms</h1><p>ways to establish consensus about history. This boils down to which transactions or blocks are valid.</p><h2 id="distributed-consensus">distributed consensus</h2><ul><li>There are n nodes. Some of the nodes are faulty/malicious. Nodes can/has to come up with a value</li><li>the consensus must terminate with all honest nodes in agreement on the value.</li><li>The value must have been generated by an honest nodes</li></ul><h2 id="proof-of-work">Proof of Work</h2><h3 id="purpose">purpose</h3><ul><li>how to pick random node whose value can be accepted</li><li>nothing at stake for miners, there’s no reason to be honest</li><li>assume honest nodes. Easy to subvert</li></ul><h3 id="hash-puzzle">hash puzzle</h3><p>to produce a block requires solving a puzzle<br />the puzzle must have the following properties:</p><ul><li><p>difficult to compute</p></li><li><p>adjustable cost: modify the target value</p></li><li><p>trivial to verify</p></li><li><p><code>H(nonce || prev_hash || tx1 || tx2 ||....) &lt; target</code> : note that the <code>txi</code>s are merged to give a merkle root hash. So increasing the number of transactions for a block doesn’t increase the puzzle difficulty =&gt; miners actually try to maximise the transaction fees for the set of transactions.</p></li><li><p>PoW underlies the “value” generated by the honest node in bitcoin and other cryptos.</p></li><li><p>Somebody can prove to you that they’ve engaged in a significant amount of computation. They amount to puzzles. They are easily verifiable.</p></li><li><p>Bitcoin leverages POW protocol in context of creating transation blockchains.</p></li><li><p>Other applications: It’s also can be used in denying DOS attacks by asking the client to solve a POW puzzle before making requests to server. Or avoiding SPAM emails.</p></li><li><p>challenge string (C) + proof/response (P - generated by prover) –hashed–&gt; gives a string with very specific property (first d bits are 0 etc. - the ‘d’ maps to the difficulty of POW)</p></li><li><p><a href="https://en.wikipedia.org/wiki/Proof_of_work#Reusable_proof-of-work">Reusable Proof of Work (RPoW)</a> - basically allows PoW tokens to be reused. So a service provider can demand RPoW for exchange of its services. The new owner can they reuse the RPoW for his/her own purposes [a third party server which also accepts RPoW]. It never really caught on though.<br />The purpose of RPoW is as token money. Just like the value of real gold coins are underpinned by the amount of gold needed to create it, the value of RPoW tokens is underpinned by the amount of computation needed to ‘mint’ the original PoW token.</p></li><li><p>PoW networks can face Sybil attacks or DOS attacks.</p></li><li><p>PoW solves the distributed consensus problem (no single trusted authority) while also allows for free entry into the consensus process (thus solving the question of who gets to influence the consensus process). It’s also resistant to Sybil attacks.</p></li><li><p>In PoW, the weight of single node in the consensus process is proportional to the amount of computational resources it brings. Contrast this with proof of Stake (PoS) where this weight is proportional to the currency holdings.</p></li><li><p>resources: <a href="https://www.youtube.com/watch?v=9V1bipPkCTU">khan academy</a></p></li></ul><h3 id="sybil-attack"><a href="https://en.wikipedia.org/wiki/Sybil_attack">Sybil attack</a></h3><ul><li>One in which a reputation system is subverted by creating multiple identities. A reputation systems’s vulnerability to sybil attack depends on how easy it is to create new identities, whether the identities are fungible, how easily the reputation system accepts input from identities which are not linked back to a trusted source.</li></ul><h3 id="some-maths-around-it">Some maths around it</h3><ul><li><p>hash rate/hash power: <span><code class="inline-tag">#attempts/s</code></span></p></li><li><p>bernoulli trials: same probability of success/failure between trials (like coin toss). For a large number of bernoulli trials -&gt; poisson distribution</p></li><li><p>“Independent of history”</p><ul><li>No nonces tried, what is the mean time until puzzle is solved - 10 minutes</li><li>500 quintillion nonces tried, what is the mean time until puzzle is solved - 10 minutes</li></ul></li><li><p>mean time to mine my next block = 10 minutes/fraction of hashpower I control</p></li></ul><h2 id="byzantines-general-problem">byzantines general problem</h2><ul><li>Segal’s law</li></ul><h3 id="different-consensus-algorithms">different consensus algorithms</h3><ul><li>practical Byzantine Fault Tolerance (pBFT)</li><li>variations:<ul><li>Tendermint: prefers safety over livenesss</li><li>Casper FFG: used by Ethereum 2.0</li><li>GRANDPA - used in Polkadot. Allows quick reconciliation after network partition.</li></ul></li></ul><h3 id="proof-of-stake">Proof of Stake</h3><h3 id="sharding">Sharding</h3><h3 id="changes-to-consensus">changes to consensus</h3><ul><li>how do people decide? - just update the node software.</li><li>often people don’t do that and this leads to fork and a new currency.</li><li>small blocker arguments: have the scaling addressed “off-chain” for example - lightweight nodes.</li><li>big blockers: want to address the scaling issue on chain, by increasing the blockchain. It can be a simpler solution (+ more room for transactions so lower fees =&gt; faster transactions), but requries a hard fork and larger blockchains makes it difficult for nodes to participate.</li></ul></div><div class="metadata"><div class="date" title="Zettel date"><time datetime="2021-05-07T09:09">2021-05-07</time></div></div></article><nav class="ui attached segment deemphasized backlinksPane" id="neuron-backlinks-pane"><h3 class="ui header"><span title="Backlinks from folgezettel parents">Uplinks</span></h3><ul class="backlinks"><li><span class="zettel-link-container folge"><span class="zettel-link" title="2021-05-09T14:11"><a href="519f559e.html">Blockchain</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><span class="zettel-link-container folge"><span class="zettel-link" title="2021-05-07T09:09"><a href="a715685d.html">Crypto: Consensus mechanisms</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span></div></li><li class="item"><div class="pandoc"><span class="zettel-link-container folge"><span class="zettel-link" title="2021-05-07T09:09"><a href="a715685d.html">Crypto: Consensus mechanisms</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span></div></li></ul></li><li><span class="zettel-link-container folge"><span class="zettel-link" title="2021-05-07T09:06"><a href="0376df38.html">Cryptocurrency: Key Features</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><span class="zettel-link-container folge"><span class="zettel-link" title="2021-05-07T09:09"><a href="a715685d.html">Crypto: Consensus mechanisms</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span> is decentralised/distributed and does not rely on a single party.</div></li><li class="item"><div class="pandoc">identity has another aspect in cryptos, in regards to Sybil Attacks (which are useless in cryptos because of the way consensus works - <span class="zettel-link-container folge"><span class="zettel-link" title="2021-05-07T09:09"><a href="a715685d.html">Crypto: Consensus mechanisms</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span>, for example PoW is based on hash power, so creating multiple identities is futile.)</div></li></ul></li></ul></nav><nav class="ui attached segment deemphasized bottomPane" id="neuron-tags-pane"><div><span class="ui basic label zettel-tag" title="Tag">attempts/s</span></div></nav><nav class="ui bottom attached icon compact inverted menu brown" id="neuron-nav-bar"><!--replace-start-9--><a class="item" href="." title="Home"><i class="home icon"></i></a><!--replace-end-9--><a class="right item" href="impulse.html" title="Open Impulse"><i class="wave square icon"></i></a></nav></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.27.0" /></a></div></div></div></body></html>